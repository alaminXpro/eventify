import{j as e,r as m,u as S,b as R,s as H,z as j,L as U,l as $,A as E,B as I}from"./index-B2v4ih3O.js";import{I as z,a as M,b as G}from"./IconGithub-8WH5f0GR.js";import{I as O}from"./IconTwitter-CgfQwKWg.js";import{a as g}from"./axiosInstance-Dc8xx1j4.js";import{_ as q}from"./index-BlkNql4I.js";import{S as b}from"./sweetalert2.esm.all-acGi8jXx.js";const V=(r=!1)=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{opacity:r?"0.5":"1",d:"M13.1061 22H10.8939C7.44737 22 5.72409 22 4.54903 20.9882C3.37396 19.9764 3.13025 18.2827 2.64284 14.8952L2.36407 12.9579C1.98463 10.3208 1.79491 9.00229 2.33537 7.87495C2.87583 6.7476 4.02619 6.06234 6.32691 4.69181L7.71175 3.86687C9.80104 2.62229 10.8457 2 12 2C13.1543 2 14.199 2.62229 16.2882 3.86687L17.6731 4.69181C19.9738 6.06234 21.1242 6.7476 21.6646 7.87495C22.2051 9.00229 22.0154 10.3208 21.6359 12.9579L21.3572 14.8952C20.8697 18.2827 20.626 19.9764 19.451 20.9882C18.2759 22 16.5526 22 13.1061 22Z",fill:"currentColor"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 18.75C11.5858 18.75 11.25 18.4142 11.25 18V15C11.25 14.5858 11.5858 14.25 12 14.25C12.4142 14.25 12.75 14.5858 12.75 15V18C12.75 18.4142 12.4142 18.75 12 18.75Z",fill:"currentColor"})]}),X=()=>{const[r,h]=m.useState({}),[o,v]=m.useState({}),{loading:k}=S(s=>s.user),n=R();m.useEffect(()=>{n(H("Account Setting")),n(j(null))},[n]);const[p,F]=m.useState("home"),N=s=>{F(s)},{currentUser:t}=S(s=>s.user);m.useEffect(()=>{t&&h({name:t.name||"",email:t.email||"",avatar:t.avatar||"",department:t.department||"",semester:t.semester||"",studentId:t.studentId||"",bio:t.bio||"",profession:t.profession||"",skills:t.skills||[],phone:t.phone||"",address:t.address||"",website:t.website||"",linkedin:t.linkedin||"",twitter:t.twitter||"",facebook:t.facebook||"",github:t.github||""})},[t]);const l=s=>{if(s.target.id==="skills"){const a=s.target.value.split(",").map(i=>i.trim());h({...r,[s.target.id]:a})}else h({...r,[s.target.id]:s.target.value})},[f,w]=m.useState([]),[D,y]=m.useState(!1),L=s=>{w(s),h(a=>{var i;return{...a,avatar:((i=s[0])==null?void 0:i.dataURL)||t.avatar}})},_=async s=>{s.preventDefault();const a={};if((!r.name||r.name.trim()==="")&&(a.name="Name is required"),(!r.email||r.email.trim()==="")&&(a.email="Email is required"),(!r.studentId||r.studentId.trim()==="")&&(a.studentId="Student ID is required"),Object.keys(a).length>0){v(a);return}v({});const i=f.length>0;if(!C(r,t)&&!i){b.fire({icon:"info",title:"No changes to save",showConfirmButton:!1,toast:!0,timer:1500,position:"top-right"});return}try{n(E());let d=t.avatar;if(i){const u=new FormData;u.append("file",f[0].file),u.append("folder","avatars"),u.append("filename",`avatar_${t.id}`);const x=await g.post("/uploads/upload-single",u,{headers:{"Content-Type":"multipart/form-data"}});if(console.log(x.data),x.data.url)d=x.data.url;else{b.fire({icon:"error",title:"Failed to upload avatar",showConfirmButton:!1,timer:1500,toast:!0,position:"top-right"});return}}const c={...r,avatar:d},T=await g.patch(`/users/${t.id}`,c);n(I(T.data)),w([]),b.fire({icon:"success",title:"Profile updated successfully",showConfirmButton:!1,timer:1500,toast:!0,position:"top-right"})}catch(d){n(j(d)),b.fire({icon:"error",title:"Failed to update profile",showConfirmButton:!1,timer:1500,toast:!0,position:"top-right"})}},B=async s=>{if(s.preventDefault(),!C(r,t,["linkedin","twitter","facebook","github"])){b.fire({icon:"info",title:"No changes to save",showConfirmButton:!1,toast:!0,timer:1500,position:"top-right"});return}try{n(E());const a={linkedin:r.linkedin,twitter:r.twitter,facebook:r.facebook,github:r.github},i=await g.patch(`/users/${t.id}`,a);n(I(i.data)),b.fire({icon:"success",title:"Social links updated successfully",showConfirmButton:!1,toast:!0,timer:1500,position:"top-right"})}catch(a){n(j(a))}},C=(s,a,i=null)=>(i||Object.keys(s)).some(c=>c==="skills"?JSON.stringify(s[c])!==JSON.stringify(a[c]):s[c]!==a[c]),P=["CSE","EEE","CE","ME","BBA","TE","IPE"],A=["1.1","1.2","2.1","2.2","3.1","3.2","4.1","4.2"];return e.jsxs("div",{children:[e.jsxs("ol",{className:"flex text-primary font-semibold dark:text-white-dark",children:[e.jsx("li",{className:"bg-[#ebedf2] ltr:rounded-l-md rtl:rounded-r-md dark:bg-[#1b2e4b]",children:e.jsx(U,{to:"/",className:"p-1.5 ltr:pl-3 rtl:pr-3 ltr:pr-2 rtl:pl-2 relative  h-full flex items-center before:absolute ltr:before:-right-[15px] rtl:before:-left-[15px] rtl:before:rotate-180 before:inset-y-0 before:m-auto before:w-0 before:h-0 before:border-[16px] before:border-l-[15px] before:border-r-0 before:border-t-transparent before:border-b-transparent before:border-l-[#ebedf2] before:z-[1] dark:before:border-l-[#1b2e4b] hover:text-primary/70 dark:hover:text-white-dark/70",children:"Home"})}),e.jsx("li",{className:"bg-[#ebedf2] dark:bg-[#1b2e4b]",children:e.jsx("button",{className:"bg-primary text-white-light p-1.5 ltr:pl-6 rtl:pr-6 ltr:pr-2 rtl:pl-2 relative  h-full flex items-center before:absolute ltr:before:-right-[15px] rtl:before:-left-[15px] rtl:before:rotate-180 before:inset-y-0 before:m-auto before:w-0 before:h-0 before:border-[16px] before:border-l-[15px] before:border-r-0 before:border-t-transparent before:border-b-transparent before:border-l-primary before:z-[1]",children:"Settings"})})]}),e.jsxs("div",{className:"pt-5",children:[e.jsx("div",{children:e.jsxs("ul",{className:"sm:flex font-semibold border-b border-[#ebedf2] dark:border-[#191e3a] mb-5 whitespace-nowrap overflow-y-auto",children:[e.jsx("li",{className:"inline-block",children:e.jsxs("button",{onClick:()=>N("home"),className:`flex gap-2 p-4 border-b border-transparent hover:border-primary hover:text-primary ${p==="home"?"!border-primary text-primary":""}`,children:[e.jsx(V,{}),"Edit Profile"]})}),e.jsx("li",{className:"inline-block",children:e.jsxs("button",{onClick:()=>N("preferences"),className:`flex gap-2 p-4 border-b border-transparent hover:border-primary hover:text-primary ${p==="preferences"?"!border-primary text-primary":""}`,children:[e.jsx($,{className:"w-5 h-5"}),"Preferences"]})})]})}),p==="home"&&e.jsxs("div",{children:[e.jsxs("form",{onSubmit:_,className:"border border-[#ebedf2] dark:border-[#191e3a] rounded-md p-4 mb-5 bg-white dark:bg-black",children:[e.jsx("h6",{className:"text-lg font-bold mb-5",children:"General Information"}),e.jsxs("div",{className:"flex flex-col sm:flex-row",children:[e.jsx("div",{className:"ltr:sm:mr-4 rtl:sm:ml-4 w-full sm:w-2/12 mb-5",children:e.jsx(q,{value:f,onChange:L,maxNumber:1,acceptType:["jpg","png","jpeg"],children:({imageList:s,onImageUpload:a,onImageRemove:i})=>{var d;return e.jsxs("div",{className:"upload__image-wrapper",children:[e.jsxs("div",{className:"relative w-32 h-32 mx-auto",onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[e.jsx("img",{src:((d=s[0])==null?void 0:d.dataURL)||r.avatar,alt:"avatar",className:"w-full h-full rounded-full object-cover cursor-pointer"}),D&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center cursor-pointer",onClick:a,children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})})]}),s.length>0&&e.jsx("button",{onClick:()=>i(0),className:"mt-2 text-sm text-red-500 hover:text-red-700",children:"Remove Image"})]})}})}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",children:"Full Name"}),e.jsx("input",{onChange:l,id:"name",type:"text",placeholder:"Enter Full Name",className:`form-input ${o.name?"border-red-500":""}`,value:r.name||""}),o.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"department",children:"Department"}),e.jsxs("select",{onChange:l,id:"department",className:"form-select",value:r.department||"",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Department"}),P.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"semester",children:"Semester"}),e.jsxs("select",{onChange:l,id:"semester",className:"form-select",value:r.semester||"",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Semester"}),A.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"studentId",children:"Student ID"}),e.jsx("input",{onChange:l,id:"studentId",type:"text",placeholder:"Enter Student ID",className:`form-input ${o.studentId?"border-red-500":""}`,value:r.studentId||""}),o.studentId&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.studentId})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{onChange:l,id:"email",type:"email",placeholder:"Enter Email",className:`form-input ${o.email?"border-red-500":""}`,value:r.email||""}),o.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bio",children:"Bio"}),e.jsx("textarea",{onChange:l,id:"bio",rows:"3",placeholder:"Enter your bio",className:"form-textarea",value:r.bio||""})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"profession",children:"Profession"}),e.jsx("input",{onChange:l,id:"profession",type:"text",placeholder:"Enter your profession",className:"form-input",value:r.profession||""})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"skills",children:"Skills"}),e.jsx("input",{onChange:l,id:"skills",type:"text",placeholder:"Enter your skills (comma-separated)",className:"form-input",value:r.skills?r.skills.join(", "):""})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",children:"Phone"}),e.jsx("input",{onChange:l,id:"phone",type:"tel",placeholder:"Enter your phone number",className:"form-input",value:r.phone||""})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address",children:"Address"}),e.jsx("input",{onChange:l,id:"address",type:"text",placeholder:"Enter your address",className:"form-input",value:r.address||""})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"website",children:"Website"}),e.jsx("input",{onChange:l,id:"website",type:"url",placeholder:"Enter your website URL",className:"form-input",value:r.website||""})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cv",children:"CV"}),e.jsx("input",{onChange:l,id:"cv",type:"file",accept:".pdf,.doc,.docx",className:"form-input",value:r.cv||""})]}),e.jsx("div",{className:"sm:col-span-2 mt-3",children:e.jsx("button",{disabled:k,type:"submit",className:"btn btn-primary",children:k?"Saving...":"Save"})})]})]})]}),e.jsxs("form",{onSubmit:B,className:"border border-[#ebedf2] dark:border-[#191e3a] rounded-md p-4 bg-white dark:bg-black",children:[e.jsx("h6",{className:"text-lg font-bold mb-5",children:"Social"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"bg-[#eee] flex justify-center items-center rounded px-3 font-semibold dark:bg-[#1b2e4b] ltr:mr-2 rtl:ml-2",children:e.jsx(z,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",id:"linkedin",placeholder:"LinkedIn profile",className:"form-input",value:r.linkedin||"",onChange:l})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"bg-[#eee] flex justify-center items-center rounded px-3 font-semibold dark:bg-[#1b2e4b] ltr:mr-2 rtl:ml-2",children:e.jsx(O,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",id:"twitter",placeholder:"Twitter profile",className:"form-input",value:r.twitter||"",onChange:l})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"bg-[#eee] flex justify-center items-center rounded px-3 font-semibold dark:bg-[#1b2e4b] ltr:mr-2 rtl:ml-2",children:e.jsx(M,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",id:"facebook",placeholder:"Facebook profile",className:"form-input",value:r.facebook||"",onChange:l})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"bg-[#eee] flex justify-center items-center rounded px-3 font-semibold dark:bg-[#1b2e4b] ltr:mr-2 rtl:ml-2",children:e.jsx(G,{})}),e.jsx("input",{type:"text",id:"github",placeholder:"GitHub profile",className:"form-input",value:r.github||"",onChange:l})]})]}),e.jsx("button",{type:"submit",className:"btn btn-primary mt-6",children:"Save Social Links"})]})]}),p==="preferences"&&e.jsxs("div",{className:"switch",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5 mb-5",children:[e.jsxs("div",{className:"panel space-y-5",children:[e.jsx("h5",{className:"font-semibold text-lg mb-4",children:"Choose Theme"}),e.jsxs("div",{className:"flex justify-around",children:[e.jsx("div",{className:"flex",children:e.jsxs("label",{className:"inline-flex cursor-pointer",children:[e.jsx("input",{className:"form-radio ltr:mr-4 rtl:ml-4 cursor-pointer",type:"radio",name:"flexRadioDefault",defaultChecked:!0}),e.jsx("span",{children:e.jsx("img",{className:"ms-3",width:"100",height:"68",alt:"settings-dark",src:"/assets/images/settings-light.svg"})})]})}),e.jsxs("label",{className:"inline-flex cursor-pointer",children:[e.jsx("input",{className:"form-radio ltr:mr-4 rtl:ml-4 cursor-pointer",type:"radio",name:"flexRadioDefault"}),e.jsx("span",{children:e.jsx("img",{className:"ms-3",width:"100",height:"68",alt:"settings-light",src:"/assets/images/settings-dark.svg"})})]})]})]}),e.jsxs("div",{className:"panel space-y-5",children:[e.jsx("h5",{className:"font-semibold text-lg mb-4",children:"Activity data"}),e.jsx("p",{children:"Download your Summary, Task and Payment History Data"}),e.jsx("button",{type:"button",className:"btn btn-primary",children:"Download Data"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5",children:[e.jsxs("div",{className:"panel space-y-5",children:[e.jsx("h5",{className:"font-semibold text-lg mb-4",children:"Public Portfolio Profile"}),e.jsxs("p",{children:["Your ",e.jsx("span",{className:"text-primary",children:"Profile"})," will be visible to anyone on the network."]}),e.jsxs("label",{className:"w-12 h-6 relative",children:[e.jsx("input",{type:"checkbox",className:"custom_switch absolute w-full h-full opacity-0 z-10 cursor-pointer peer",id:"custom_switch_checkbox1"}),e.jsx("span",{className:"bg-[#ebedf2] dark:bg-dark block h-full rounded-full before:absolute before:left-1 before:bg-white dark:before:bg-white-dark dark:peer-checked:before:bg-white before:bottom-1 before:w-4 before:h-4 before:rounded-full peer-checked:before:left-7 peer-checked:bg-primary before:transition-all before:duration-300"})]})]}),e.jsxs("div",{className:"panel space-y-5",children:[e.jsx("h5",{className:"font-semibold text-lg mb-4",children:"Show my email"}),e.jsxs("p",{children:["Your ",e.jsx("span",{className:"text-primary",children:"Email"})," will be visible to anyone on the network."]}),e.jsxs("label",{className:"w-12 h-6 relative",children:[e.jsx("input",{type:"checkbox",className:"custom_switch absolute w-full h-full opacity-0 z-10 cursor-pointer peer",id:"custom_switch_checkbox2"}),e.jsx("span",{className:"bg-[#ebedf2] dark:bg-dark block h-full rounded-full before:absolute before:left-1 before:bg-white  dark:before:bg-white-dark dark:peer-checked:before:bg-white before:bottom-1 before:w-4 before:h-4 before:rounded-full peer-checked:before:left-7 peer-checked:bg-primary before:transition-all before:duration-300"})]})]}),e.jsxs("div",{className:"panel space-y-5",children:[e.jsx("h5",{className:"font-semibold text-lg mb-4",children:"Hide left navigation"}),e.jsxs("p",{children:["Sidebar will be ",e.jsx("span",{className:"text-primary",children:"hidden"})," by default"]}),e.jsxs("label",{className:"w-12 h-6 relative",children:[e.jsx("input",{type:"checkbox",className:"custom_switch absolute w-full h-full opacity-0 z-10 cursor-pointer peer",id:"custom_switch_checkbox4"}),e.jsx("span",{className:"bg-[#ebedf2] dark:bg-dark block h-full rounded-full before:absolute before:left-1 before:bg-white  dark:before:bg-white-dark dark:peer-checked:before:bg-white before:bottom-1 before:w-4 before:h-4 before:rounded-full peer-checked:before:left-7 peer-checked:bg-primary before:transition-all before:duration-300"})]})]})]})]})]})]})};export{X as default};
